<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Robot Candy Toolbox</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://localhost:3000/public/chromata.min.js"></script>
  </head>
  <body>
    <div class="container">
      <h2>Received iCandydate file: <%= thefile %></h2>
      <hr>
      <img src='./<%= thepath %>' alt='woops...' height='200' width='400'>
      <h3>And here it is</h3>
    </div>
    <div class="preview main">
      <h2>Let's make some iCandy</h2>
      <script>
      $(window).bind("load", function () {
        // setup the chromata variable
        var chromata = new Chromata(document.querySelector('div.preview.main img.viewport'));
      });

      //make a fractal like design.
      function makeFractal() {
        //$(window).bind("load", function () {
        var chromata = new Chromata(document.querySelector('div.preview.main img.viewport'));
        chromata.options.colorMode = "color";
        chromata.options.compositeOperation = "lighten";
        chromata.options.iterationLimit = 0     ;
        chromata.options.key = "low";
        chromata.options.lineMode = "smooth";
        chromata.options.lineWidth = 1;
        chromata.options.origin = ["45% 50%"];
        chromata.options.outputSize = "container";
        chromata.options.pathFinderCount = 40;
        chromata.options.speed = 15;
        chromata.options.turningAngle = Math.PI * .5;
        chromata.start()          ;
      //})
      };

      function makeLineSketch() {
        //$(window).bind("load", function () {
        var chromata = new Chromata(document.querySelector('div.preview.main img.viewport'));
        chromata.options.colorMode = "grayscale";
        chromata.options.compositeOperation = "lighten";
        chromata.options.iterationLimit = 0     ;
        chromata.options.key = "high";
        chromata.options.lineMode = "smooth";
        chromata.options.lineWidth = 2;
        chromata.options.origin = ["50% 50%"];
        chromata.options.outputSize = "container";
        chromata.options.pathFinderCount = 40;
        chromata.options.speed = 8;
        chromata.options.turningAngle = Math.PI * 2;
        chromata.start()          ;
      //})
      };

      function makeImpressionism() {
        //$(window).bind("load", function () {
        var chromata = new Chromata(document.querySelector('div.preview.main img.viewport'));
        chromata.options.colorMode = "color";
        chromata.options.compositeOperation = "lighten";
        chromata.options.iterationLimit = 0     ;
        chromata.options.key = "low";
        chromata.options.lineMode = "point";
        chromata.options.lineWidth = 3;
        chromata.options.origin = ["50% 50%"];
        chromata.options.outputSize = "container";
        chromata.options.pathFinderCount = 40;
        chromata.options.speed = 8;
        chromata.options.turningAngle = Math.PI * 2;
        chromata.start()          ;
      //})
      };

      function makeGeometric() {
        //$(window).bind("load", function () {
        var chromata = new Chromata(document.querySelector('div.preview.main img.viewport'));
        chromata.options.colorMode = "color";
        chromata.options.compositeOperation = "lighten";
        chromata.options.iterationLimit = 0     ;
        chromata.options.key = "low";
        chromata.options.lineMode = "square";
        chromata.options.lineWidth = 2;
        chromata.options.origin = ["50% 0%", "50% 99%"];
        chromata.options.outputSize = "container";
        chromata.options.pathFinderCount = 30;
        chromata.options.speed = 3;
        chromata.options.turningAngle = Math.PI * .5;
        chromata.start()          ;
      //})
      };

      function makeHalftone() {
        //$(window).bind("load", function () {
        var chromata = new Chromata(document.querySelector('div.preview.main img.viewport'));
        chromata.options.colorMode = "color";
        chromata.options.compositeOperation = "lighten";
        chromata.options.iterationLimit = 0     ;
        chromata.options.key = "low";
        chromata.options.lineMode = "point";
        chromata.options.lineWidth = 10;
        chromata.options.origin = ["50% 46%"];
        chromata.options.outputSize = "container";
        chromata.options.pathFinderCount = 10;
        chromata.options.speed = 10;
        chromata.options.turningAngle = Math.PI * .5;
        chromata.start()          ;
      //})
      };

      function makeNeon() {
        //$(window).bind("load", function () {
        var chromata = new Chromata(document.querySelector('div.preview.main img.viewport'));
        chromata.options.colorMode = "color";
        chromata.options.compositeOperation = "lighten";
        chromata.options.iterationLimit = 0     ;
        chromata.options.key = "low";
        chromata.options.lineMode = "smooth";
        chromata.options.lineWidth = 2;
        chromata.options.origin = ["bottom", "left", "right"];
        chromata.options.outputSize = "container";
        chromata.options.pathFinderCount = 30;
        chromata.options.speed = 3;
        chromata.options.turningAngle = Math.PI * .5;
        chromata.start()          ;
      //})
      };

      function makeNeon() {
        //$(window).bind("load", function () {
        var chromata = new Chromata(document.querySelector('div.preview.main img.viewport'));
        chromata.options.colorMode = "color";
        chromata.options.compositeOperation = "lighten";
        chromata.options.iterationLimit = 0     ;
        chromata.options.key = "low";
        chromata.options.lineMode = "smooth";
        chromata.options.lineWidth = 2;
        chromata.options.origin = ["bottom", "left", "right"];
        chromata.options.outputSize = "container";
        chromata.options.pathFinderCount = 30;
        chromata.options.speed = 3;
        chromata.options.turningAngle = Math.PI * .5;
        chromata.start()          ;
      //})
      };

      function makePixels() {
        //$(window).bind("load", function () {
        var chromata = new Chromata(document.querySelector('div.preview.main img.viewport'));
        chromata.options.colorMode = "greyscale";
        chromata.options.compositeOperation = "lighten";
        chromata.options.iterationLimit = 0     ;
        chromata.options.key = "high";
        chromata.options.lineMode = "square";
        chromata.options.lineWidth = 4;
        chromata.options.origin = ["45% 70%","85% 50%","70% 35%"];
        chromata.options.outputSize = "container";
        chromata.options.pathFinderCount = 60;
        chromata.options.speed = 4;
        chromata.options.turningAngle = Math.PI * .5;
        chromata.start()          ;
      //})
      };

      function makeSketch() {
        //$(window).bind("load", function () {
        var chromata = new Chromata(document.querySelector('div.preview.main img.viewport'));
        chromata.options.colorMode = "greyscale";
        chromata.options.compositeOperation = "lighten";
        chromata.options.iterationLimit = 0     ;
        chromata.options.key = "high";
        chromata.options.lineMode = "smooth";
        chromata.options.lineWidth = 1;
        chromata.options.origin = ["40% 33%","65% 33%"];
        chromata.options.outputSize = "container";
        chromata.options.pathFinderCount = 40;
        chromata.options.speed = 2;
        chromata.options.turningAngle = Math.PI * 1.5;
        chromata.start()          ;
      //})
      };


      </script>
      <img src='./<%= thepath %>' class='viewport' alt='woops...' height='200' width='400'>


      <div class='controlport'>
        <form >
          <button type="button" onclick="makeFractal()">Fractals</button>
          <button type="button" onclick="makeLineSketch()">Lines</button>
          <button type="button" onclick="makeImpressionism()">Impressionist</button>
          <button type="button" onclick="makeGeometric()">Geometric</button>
          <button type="button" onclick="makeHalftone()">Half Tone</button>
          <button type="button" onclick="makeNeon()">Neon</button>
          <button type="button" onclick="makePixels()">Pixelize</button>
          <button type="button" onclick="makeSketch()">Etch-A-Sketch</button>
        </form>
      </div>
    </div>



  </body>
</html>
